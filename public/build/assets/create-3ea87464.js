import{d as N,r as o,u as z,n as A,o as D,c as r,l as M,g as e,w as u,A as _,f as S,h as d,q as j,i as s,v as c,x as p,E as m,j as w}from"./app-585073a5.js";const P=s("div",{class:"mb-6"},[s("h2",{class:"text-xl"},"ایجاد سرویس")],-1),T={class:"grid grid-cols-12 gap-4"},G={class:"col-span-4"},H={class:"invalid-feedback d-block"},I={class:"col-span-4"},J={class:"invalid-feedback d-block"},K={class:"col-span-4"},L={class:"invalid-feedback d-block"},O={class:"col-span-6"},Q={class:"col-span-6"},W={class:"invalid-feedback d-block"},X={class:"col-span-12"},Y={class:"invalid-feedback d-block"},ee=N({__name:"create",setup(Z){const g=o(!1),b=o(null),a=o({server_id:null,package_duration_id:null,package_id:null,status:"active",price:null,link:null}),f=o(!1);o([v=>v?!0:"نام   سرویس  الزامی می باشد"]);const V=o([]),h=o([]),x=o([]),U=o([{state:"فعال",value:"active"},{state:"غیرفعال",value:"inactive"}]),q=z();A();const y=async v=>{const{valid:l}=await b.value.validate();if(l){g.value=!0;const t=new FormData;t.append("server_id",a.value.server_id),t.append("package_duration_id",a.value.package_duration_id),t.append("package_id",a.value.package_id),t.append("status",a.value.status),t.append("price",a.value.price),t.append("link",a.value.link);const{data:k}=await _.post("/api/panel/services",t);k.status==200&&(f.value=!0,q.push({name:"panel-services-index"}))}},C=async()=>{let{data:v}=await _.get("/api/panel/servers");V.value=v.data;let{data:l}=await _.get("/api/panel/package/durations");h.value=l.data;let{data:t}=await _.get("/api/panel/packages");x.value=t.data};return D(()=>{C()}),(v,l)=>{const t=r("v-select"),k=r("v-text-field"),R=r("v-textarea"),B=r("v-btn"),E=r("v-sheet"),F=r("v-snackbar");return S(),M("div",null,[e(E,null,{default:u(()=>[P,e(d(j),{ref_key:"formRef",ref:b,onSubmit:y},{default:u(()=>[s("div",T,[s("div",G,[e(d(c),{mode:"passive",name:"server_id",rules:"required",label:"سرور"},{default:u(({field:i})=>[e(t,p(i,{modelValue:a.value.server_id,"onUpdate:modelValue":l[0]||(l[0]=n=>a.value.server_id=n),label:"انتخاب  سرور",items:V.value,"item-title":"name","item-value":"id","single-line":"",variant:"solo-filled","hide-details":"auto"}),null,16,["modelValue","items"])]),_:1}),s("div",H,[e(d(m),{name:"server_id"})])]),s("div",I,[e(d(c),{mode:"passive",name:"package_duration_id",rules:"required",label:"بازه زمانی"},{default:u(({field:i})=>[e(t,p(i,{modelValue:a.value.package_duration_id,"onUpdate:modelValue":l[1]||(l[1]=n=>a.value.package_duration_id=n),label:"انتخاب  بازه زمانی",items:h.value,"item-title":"name","item-value":"id","single-line":"",variant:"solo-filled","hide-details":"auto"}),null,16,["modelValue","items"])]),_:1}),s("div",J,[e(d(m),{name:"package_duration_id"})])]),s("div",K,[e(d(c),{mode:"passive",name:"package_id",rules:"required",label:"بازه پکیج"},{default:u(({field:i})=>[e(t,p({modelValue:a.value.package_id,"onUpdate:modelValue":l[2]||(l[2]=n=>a.value.package_id=n),label:"انتخاب  پکیج",items:x.value,"item-title":"name","item-value":"id","single-line":"",variant:"solo-filled"},i,{"hide-details":"auto"}),null,16,["modelValue","items"])]),_:1}),s("div",L,[e(d(m),{name:"package_id"})])]),s("div",O,[e(t,{modelValue:a.value.status,"onUpdate:modelValue":l[3]||(l[3]=i=>a.value.status=i),label:"انتخاب  وضعیت",items:U.value,"item-title":"state","item-value":"value","single-line":"",variant:"solo-filled"},null,8,["modelValue","items"])]),s("div",Q,[e(d(c),{mode:"passive",name:"price",rules:"required",label:" قیمت"},{default:u(({field:i})=>[e(k,p({type:"number",modelValue:a.value.price,"onUpdate:modelValue":l[4]||(l[4]=n=>a.value.price=n),label:"قیمت","single-line":"",variant:"solo-filled",size:"large"},i,{"hide-details":"auto"}),null,16,["modelValue"])]),_:1}),s("div",W,[e(d(m),{name:"price"})])]),s("div",X,[e(d(c),{mode:"passive",name:"link",rules:"required",label:" لینک"},{default:u(({field:i})=>[e(R,p({modelValue:a.value.link,"onUpdate:modelValue":l[5]||(l[5]=n=>a.value.link=n),label:"لینک کانفیگ","single-line":"",variant:"solo-filled",size:"large"},i,{"hide-details":"auto"}),null,16,["modelValue"])]),_:1}),s("div",Y,[e(d(m),{name:"link"})])])]),e(B,{loading:g.value,color:"light-blue-accent-4",type:"submit",block:"",class:"mt-2"},{default:u(()=>[w("ایجاد")]),_:1},8,["loading"])]),_:1},512)]),_:1}),e(F,{absolute:"",modelValue:f.value,"onUpdate:modelValue":l[6]||(l[6]=i=>f.value=i),timeout:2e4},{default:u(()=>[w(" سرویس با موفقیت ایجاد شد. ")]),_:1},8,["modelValue"])])}}});export{ee as default};
