import{d as B,r,u as E,n as N,o as A,c as u,l as D,g as a,w as d,A as V,f as M,h as i,q as S,i as t,v as p,x as g,E as _,j as h}from"./app-5f0513f2.js";const j=t("div",{class:"mb-6"},[t("h2",{class:"text-xl"},"ویرایش برنامه")],-1),P={class:"grid grid-cols-12 gap-4"},T={class:"col-span-4"},G={class:"invalid-feedback d-block"},H={class:"col-span-4"},I={class:"invalid-feedback d-block"},J={class:"col-span-4"},K={class:"col-span-12"},L={class:"invalid-feedback d-block"},O={class:"col-span-12"},Q={class:"invalid-feedback d-block"},Y=B({__name:"edit",setup(W){const k=r(!1),m=r(null),e=r({name:null,link:null,description:null,status:"active",video:null}),f=r(!1);r([s=>s?!0:"نام   برنامه  الزامی می باشد"]);const x=r([{state:"فعال",value:"active"},{state:"غیرفعال",value:"inactive"}]),w=E(),v=N(),C=async s=>{const{valid:l}=await m.value.validate();if(l){k.value=!0;const n=new FormData;n.append("guide_platform_id",v.params.id),n.append("name",e.value.name),n.append("link",e.value.link),n.append("status",e.value.status),n.append("description",e.value.description),e.value.video&&n.append("video",e.value.video);const{data:b}=await V.put(`/api/panel/guide/platform/${v.params.platform}/clients/${v.params.id}`,n);b.status==200&&(f.value=!0,w.push({name:"panel-platforms-clients-index",params:{id:v.params.platform}}))}},U=s=>{e.value.video=s.target.files[0],m.value.setFieldValue("video",e.value.video)},q=async()=>{let{data:s}=await V.get(`/api/panel/guide/platform/${v.params.platform}/clients/${v.params.id}`);e.value.name=s.data.name,e.value.link=s.data.link,e.value.status=s.data.status,e.value.description=s.data.description,m.value.setValues({...e.value})};return A(()=>{q()}),(s,l)=>{const n=u("v-text-field"),b=u("v-select"),y=u("v-textarea"),z=u("v-file-input"),F=u("v-btn"),R=u("v-sheet"),$=u("v-snackbar");return M(),D("div",null,[a(R,null,{default:d(()=>[j,a(i(S),{ref_key:"formRef",ref:m,onSubmit:C},{default:d(()=>[t("div",P,[t("div",T,[a(i(p),{mode:"passive",name:"name",rules:"required",label:" عنوان"},{default:d(({field:o})=>[a(n,g({modelValue:e.value.name,"onUpdate:modelValue":l[0]||(l[0]=c=>e.value.name=c),label:"عنوان","single-line":"",variant:"solo-filled",size:"large"},o,{"hide-details":"auto"}),null,16,["modelValue"])]),_:1}),t("div",G,[a(i(_),{name:"name"})])]),t("div",H,[a(i(p),{mode:"passive",name:"link",rules:"required",label:" لینک دانلود برنامه"},{default:d(({field:o})=>[a(n,g({modelValue:e.value.link,"onUpdate:modelValue":l[1]||(l[1]=c=>e.value.link=c),label:"لینک دانلود برنامه","single-line":"",variant:"solo-filled",size:"large"},o,{"hide-details":"auto"}),null,16,["modelValue"])]),_:1}),t("div",I,[a(i(_),{name:"link"})])]),t("div",J,[a(b,{modelValue:e.value.status,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.status=o),label:"انتخاب  وضعیت",items:x.value,"item-title":"state","item-value":"value","single-line":"",variant:"solo-filled"},null,8,["modelValue","items"])]),t("div",K,[a(i(p),{mode:"passive",name:"description",rules:"required",label:"توضیحات"},{default:d(({field:o})=>[a(y,g({modelValue:e.value.description,"onUpdate:modelValue":l[3]||(l[3]=c=>e.value.description=c),label:"توضیحات","single-line":"",variant:"solo-filled",size:"large"},o,{"hide-details":"auto"}),null,16,["modelValue"])]),_:1}),t("div",L,[a(i(_),{name:"description"})])]),t("div",O,[a(i(p),{mode:"passive",name:"video",label:"ویدیو آموزشی"},{default:d(({field:o})=>[a(z,{accept:"video/*",label:"ویدیو آموزشی",size:"large","hide-details":"auto",onChange:U})]),_:1}),t("div",Q,[a(i(_),{name:"video"})])])]),a(F,{loading:k.value,color:"light-blue-accent-4",type:"submit",block:"",class:"mt-2"},{default:d(()=>[h("ویرایش")]),_:1},8,["loading"])]),_:1},512)]),_:1}),a($,{absolute:"",modelValue:f.value,"onUpdate:modelValue":l[4]||(l[4]=o=>f.value=o),timeout:2e4},{default:d(()=>[h(" برنامه با موفقیت ویرایش شد. ")]),_:1},8,["modelValue"])])}}});export{Y as default};
