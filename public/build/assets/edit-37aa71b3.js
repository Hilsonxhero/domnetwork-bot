import{d as y,r as t,u as E,p as R,q as S,o as C,c as r,l as F,g as a,w as s,h as d,A as g,f as N,i as l,v as U,x as q,y as A,E as D,j as b}from"./app-fa5d0039.js";import{a as M,B as $}from"./index-db91f07a.js";const j={class:"grid grid-cols-12 gap-4"},z={class:"col-span-12 lg:col-span-12"},I=l("div",{class:"mb-6"},[l("h2",{class:"text-xl"},"ویرایش پلتفرم")],-1),P={class:"grid grid-cols-12 gap-4"},T={class:"col-span-12"},G={class:"invalid-feedback d-block"},L=y({__name:"edit",setup(H){const p=t(!0),f=t(!1),i=t(null),o=t({name:null}),c=t(!1);t([n=>n?!0:"نام   پلتفرم  الزامی می باشد"]),t([{state:"فعال",value:"active"},{state:"غیرفعال",value:"inactive"}]);const h=E(),_=R(),x=async n=>{const{valid:e}=await i.value.validate();if(e){f.value=!0;const u=new FormData;u.append("name",o.value.name);const{data:m}=await g.put(`/api/panel/guide/platforms/${_.params.id}`,u);m.status==200&&(c.value=!0,h.push({name:"panel-platforms-index"}))}},k=async()=>{var e;let{data:n}=await g.get(`/api/panel/guide/platforms/${_.params.id}`);o.value.name=(e=n.data)==null?void 0:e.name,p.value=!1};return S(()=>{i.value&&i.value.setValues({...o.value})}),C(()=>{k()}),(n,e)=>{const u=r("v-text-field"),m=r("v-btn"),V=r("v-sheet"),w=r("v-snackbar");return N(),F("div",null,[a(d($),{animated:"",loading:p.value},{template:s(()=>[l("div",j,[l("div",z,[a(d(M),{variant:"card",class:"h-[500px]"})])])]),default:s(()=>[a(V,null,{default:s(()=>[I,a(d(U),{ref_key:"formRef",ref:i,onSubmit:x},{default:s(()=>[l("div",P,[l("div",T,[a(d(q),{mode:"passive",name:"name",rules:"required",label:" نام پلتفرم"},{default:s(({field:v})=>[a(u,A({modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=B=>o.value.name=B),label:"نام پلتفرم","single-line":"",variant:"solo-filled",size:"large"},v,{"hide-details":"auto"}),null,16,["modelValue"])]),_:1}),l("div",G,[a(d(D),{name:"name"})])])]),a(m,{loading:f.value,color:"light-blue-accent-4",type:"submit",block:"",class:"mt-2"},{default:s(()=>[b("ویرایش")]),_:1},8,["loading"])]),_:1},512)]),_:1})]),_:1},8,["loading"]),a(w,{absolute:"",modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=v=>c.value=v),timeout:2e4},{default:s(()=>[b(" پلتفرم با موفقیت ویرایش شد. ")]),_:1},8,["modelValue"])])}}});export{L as default};
