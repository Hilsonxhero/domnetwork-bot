import{d as F,r as o,u as N,p as A,o as D,c,l as M,g as e,w as n,A as v,f as S,h as d,v as j,i as t,x as p,y as _,E as m,j as w}from"./app-d91952c3.js";const z=t("div",{class:"mb-6"},[t("h2",{class:"text-xl"},"ایجاد سرویس")],-1),P={class:"grid grid-cols-12 gap-4"},T={class:"col-span-12 lg:col-span-4"},G={class:"invalid-feedback d-block"},H={class:"col-span-12 lg:col-span-4"},I={class:"invalid-feedback d-block"},J={class:"col-span-12 lg:col-span-4"},K={class:"invalid-feedback d-block"},L={class:"col-span-12 lg:col-span-6"},O={class:"col-span-12 lg:col-span-6"},Q={class:"invalid-feedback d-block"},Y=F({__name:"create",setup(W){const k=o(!1),b=o(null),l=o({server_id:null,package_duration_id:null,package_id:null,status:"active",price:null}),g=o(!1);o([r=>r?!0:"نام   سرویس  الزامی می باشد"]);const V=o([]),h=o([]),x=o([]),y=o([{state:"فعال",value:"active"},{state:"غیرفعال",value:"inactive"}]),U=N();A();const q=async r=>{const{valid:a}=await b.value.validate();if(a){k.value=!0;const s=new FormData;s.append("server_id",l.value.server_id),s.append("package_duration_id",l.value.package_duration_id),s.append("package_id",l.value.package_id),s.append("status",l.value.status),s.append("price",l.value.price);const{data:f}=await v.post("/api/panel/services",s);f.status==200&&(g.value=!0,U.push({name:"panel-services-index"}))}},C=async()=>{let{data:r}=await v.get("/api/panel/servers");V.value=r.data;let{data:a}=await v.get("/api/panel/package/durations");h.value=a.data;let{data:s}=await v.get("/api/panel/packages");x.value=s.data};return D(()=>{C()}),(r,a)=>{const s=c("v-select"),f=c("v-text-field"),R=c("v-btn"),B=c("v-sheet"),E=c("v-snackbar");return S(),M("div",null,[e(B,null,{default:n(()=>[z,e(d(j),{ref_key:"formRef",ref:b,onSubmit:q},{default:n(()=>[t("div",P,[t("div",T,[e(d(p),{mode:"passive",name:"server_id",rules:"required",label:"سرور"},{default:n(({field:i})=>[e(s,_(i,{modelValue:l.value.server_id,"onUpdate:modelValue":a[0]||(a[0]=u=>l.value.server_id=u),label:"انتخاب  سرور",items:V.value,"item-title":"name","item-value":"id","single-line":"",variant:"solo-filled","hide-details":"auto"}),null,16,["modelValue","items"])]),_:1}),t("div",G,[e(d(m),{name:"server_id"})])]),t("div",H,[e(d(p),{mode:"passive",name:"package_duration_id",rules:"required",label:"بازه زمانی"},{default:n(({field:i})=>[e(s,_(i,{modelValue:l.value.package_duration_id,"onUpdate:modelValue":a[1]||(a[1]=u=>l.value.package_duration_id=u),label:"انتخاب  بازه زمانی",items:h.value,"item-title":"name","item-value":"id","single-line":"",variant:"solo-filled","hide-details":"auto"}),null,16,["modelValue","items"])]),_:1}),t("div",I,[e(d(m),{name:"package_duration_id"})])]),t("div",J,[e(d(p),{mode:"passive",name:"package_id",rules:"required",label:"بازه پکیج"},{default:n(({field:i})=>[e(s,_({modelValue:l.value.package_id,"onUpdate:modelValue":a[2]||(a[2]=u=>l.value.package_id=u),label:"انتخاب  پکیج",items:x.value,"item-title":"name","item-value":"id","single-line":"",variant:"solo-filled"},i,{"hide-details":"auto"}),null,16,["modelValue","items"])]),_:1}),t("div",K,[e(d(m),{name:"package_id"})])]),t("div",L,[e(s,{modelValue:l.value.status,"onUpdate:modelValue":a[3]||(a[3]=i=>l.value.status=i),label:"انتخاب  وضعیت",items:y.value,"item-title":"state","item-value":"value","single-line":"",variant:"solo-filled"},null,8,["modelValue","items"])]),t("div",O,[e(d(p),{mode:"passive",name:"price",rules:"required",label:" قیمت"},{default:n(({field:i})=>[e(f,_({type:"number",modelValue:l.value.price,"onUpdate:modelValue":a[4]||(a[4]=u=>l.value.price=u),label:"قیمت","single-line":"",variant:"solo-filled",size:"large"},i,{"hide-details":"auto"}),null,16,["modelValue"])]),_:1}),t("div",Q,[e(d(m),{name:"price"})])])]),e(R,{loading:k.value,color:"light-blue-accent-4",type:"submit",block:"",class:"mt-2"},{default:n(()=>[w("ایجاد")]),_:1},8,["loading"])]),_:1},512)]),_:1}),e(E,{absolute:"",modelValue:g.value,"onUpdate:modelValue":a[5]||(a[5]=i=>g.value=i),timeout:2e4},{default:n(()=>[w(" سرویس با موفقیت ایجاد شد. ")]),_:1},8,["modelValue"])])}}});export{Y as default};
