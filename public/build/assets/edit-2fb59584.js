import{d as S,r as u,u as R,p as C,q as N,o as A,c as i,l as D,g as l,w as t,h as m,A as g,f as E,i as o,v as F,j as V}from"./app-9a32590d.js";import{a as $,B as j}from"./index-bedd84bb.js";const q={class:"grid grid-cols-12 gap-4"},I={class:"col-span-12 lg:col-span-12"},M=o("div",{class:"mb-6"},[o("h2",{class:"text-xl"},"ویرایش سرور")],-1),T={class:"grid grid-cols-12 gap-2"},z={class:"col-span-12"},G={class:"col-span-12 lg:col-span-6"},H={class:"col-span-12 lg:col-span-6"},J={class:"col-span-12 lg:col-span-6"},K={class:"col-span-12 lg:col-span-6"},L=o("div",null,"وضعیت",-1),O=o("div",null,"سرور پیش فرض",-1),X=S({__name:"edit",setup(P){const c=u(!0),_=u(!1),v=u(null),e=u({name:null,username:null,password:null,address:null,inbound:null,is_active:!1,is_default:!1}),p=u(!1),w=u([n=>n?!0:"نام  سرور  الزامی می باشد"]),x=R(),f=C(),y=async n=>{_.value=!0;const a=new FormData;a.append("name",e.value.name),a.append("username",e.value.username),a.append("password",e.value.password),a.append("address",e.value.address),a.append("inbound",e.value.inbound),a.append("is_active",e.value.is_active),a.append("is_default",e.value.is_default);const{data:d}=await g.put(`/api/panel/servers/${f.params.id}`,a);d.status==200&&(p.value=!0,x.push({name:"panel-servers-index"}))},U=async()=>{const{data:n}=await g.get(`/api/panel/servers/${f.params.id}`);e.value.name=n.data.name,e.value.username=n.data.username,e.value.password=n.data.password,e.value.address=n.data.address,e.value.inbound=n.data.inbound,e.value.is_active=n.data.is_active.toString(),e.value.is_default=n.data.is_default.toString(),c.value=!1};return N(()=>{v.value&&v.value.setValues({...e.value})}),A(()=>{U()}),(n,a)=>{const d=i("v-text-field"),r=i("v-radio"),b=i("v-radio-group"),k=i("v-btn"),h=i("v-sheet"),B=i("v-snackbar");return E(),D("div",null,[l(m(j),{animated:"",loading:c.value},{template:t(()=>[o("div",q,[o("div",I,[l(m($),{variant:"card",class:"h-[500px]"})])])]),default:t(()=>[l(h,null,{default:t(()=>[M,l(m(F),{ref_key:"formRef",ref:v,onSubmit:y},{default:t(()=>[o("div",T,[o("div",z,[l(d,{modelValue:e.value.name,"onUpdate:modelValue":a[0]||(a[0]=s=>e.value.name=s),rules:w.value,label:"نام",density:"compact","single-line":"",variant:"solo"},null,8,["modelValue","rules"])]),o("div",G,[l(d,{modelValue:e.value.username,"onUpdate:modelValue":a[1]||(a[1]=s=>e.value.username=s),label:"نام کاربری سرور",density:"compact","single-line":"",variant:"solo"},null,8,["modelValue"])]),o("div",H,[l(d,{modelValue:e.value.password,"onUpdate:modelValue":a[2]||(a[2]=s=>e.value.password=s),label:" رمز عبور سرور",density:"compact","single-line":"",variant:"solo"},null,8,["modelValue"])]),o("div",J,[l(d,{modelValue:e.value.address,"onUpdate:modelValue":a[3]||(a[3]=s=>e.value.address=s),label:"آدرس سرور",density:"compact","single-line":"",variant:"solo"},null,8,["modelValue"])]),o("div",K,[l(d,{modelValue:e.value.inbound,"onUpdate:modelValue":a[4]||(a[4]=s=>e.value.inbound=s),label:"inbound id",density:"compact","single-line":"",variant:"solo"},null,8,["modelValue"])])]),l(b,{modelValue:e.value.is_active,"onUpdate:modelValue":a[5]||(a[5]=s=>e.value.is_active=s)},{label:t(()=>[L]),default:t(()=>[l(r,{label:"فعال",value:"1"}),l(r,{label:"غیرفعال",value:"0"})]),_:1},8,["modelValue"]),l(b,{modelValue:e.value.is_default,"onUpdate:modelValue":a[6]||(a[6]=s=>e.value.is_default=s)},{label:t(()=>[O]),default:t(()=>[l(r,{label:"می باشد",value:"1"}),l(r,{label:"نمی باشد",value:"0"})]),_:1},8,["modelValue"]),l(k,{loading:_.value,color:"light-blue-accent-4",type:"submit",block:"",class:"mt-2"},{default:t(()=>[V("ویرایش")]),_:1},8,["loading"])]),_:1},512)]),_:1})]),_:1},8,["loading"]),l(B,{absolute:"",modelValue:p.value,"onUpdate:modelValue":a[7]||(a[7]=s=>p.value=s),timeout:2e4},{default:t(()=>[V(" سرور با موفقیت ویرایش شد. ")]),_:1},8,["modelValue"])])}}});export{X as default};
