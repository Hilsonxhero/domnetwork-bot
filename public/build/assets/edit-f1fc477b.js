import{d as S,r as u,u as $,p as N,q as A,o as D,c,l as M,g as a,w as d,h as s,A as V,f as j,i as l,v as I,x as m,y as b,E as _,j as x}from"./app-05202554.js";import{a as P,B as T}from"./index-7bd54db8.js";const G={class:"grid grid-cols-12 gap-4"},H={class:"col-span-12 lg:col-span-12"},J=l("div",{class:"mb-6"},[l("h2",{class:"text-xl"},"ویرایش برنامه")],-1),K={class:"grid grid-cols-12 gap-4"},L={class:"col-span-12 lg:col-span-4"},O={class:"invalid-feedback d-block"},Q={class:"col-span-12 lg:col-span-4"},W={class:"invalid-feedback d-block"},X={class:"col-span-12 lg:col-span-4"},Y={class:"col-span-12"},Z={class:"invalid-feedback d-block"},ee={class:"col-span-12"},ae={class:"invalid-feedback d-block"},oe=S({__name:"edit",setup(le){const k=u(!0),h=u(!1),v=u(null),e=u({name:null,link:null,description:null,status:"active",video:null}),f=u(!1);u([o=>o?!0:"نام   برنامه  الزامی می باشد"]);const w=u([{state:"فعال",value:"active"},{state:"غیرفعال",value:"inactive"}]),B=$(),r=N(),C=async o=>{const{valid:t}=await v.value.validate();if(t){h.value=!0;const n=new FormData;n.append("guide_platform_id",r.params.id),n.append("name",e.value.name),n.append("link",e.value.link),n.append("status",e.value.status),n.append("description",e.value.description),e.value.video&&n.append("video",e.value.video);const{data:g}=await V.put(`/api/panel/guide/platform/${r.params.platform}/clients/${r.params.id}`,n);g.status==200&&(f.value=!0,B.push({name:"panel-platforms-clients-index",params:{id:r.params.platform}}))}},y=o=>{e.value.video=o.target.files[0],v.value.setFieldValue("video",e.value.video)},U=async()=>{let{data:o}=await V.get(`/api/panel/guide/platform/${r.params.platform}/clients/${r.params.id}`);e.value.name=o.data.name,e.value.link=o.data.link,e.value.status=o.data.status,e.value.description=o.data.description,k.value=!1};return A(()=>{v.value&&v.value.setValues({...e.value})}),D(()=>{U()}),(o,t)=>{const n=c("v-text-field"),g=c("v-select"),q=c("v-textarea"),z=c("v-file-input"),E=c("v-btn"),F=c("v-sheet"),R=c("v-snackbar");return j(),M("div",null,[a(s(T),{animated:"",loading:k.value},{template:d(()=>[l("div",G,[l("div",H,[a(s(P),{variant:"card",class:"h-[500px]"})])])]),default:d(()=>[a(F,null,{default:d(()=>[J,a(s(I),{ref_key:"formRef",ref:v,onSubmit:C},{default:d(()=>[l("div",K,[l("div",L,[a(s(m),{mode:"passive",name:"name",rules:"required",label:" عنوان"},{default:d(({field:i})=>[a(n,b({modelValue:e.value.name,"onUpdate:modelValue":t[0]||(t[0]=p=>e.value.name=p),label:"عنوان","single-line":"",variant:"solo-filled",size:"large"},i,{"hide-details":"auto"}),null,16,["modelValue"])]),_:1}),l("div",O,[a(s(_),{name:"name"})])]),l("div",Q,[a(s(m),{mode:"passive",name:"link",rules:"required",label:" لینک دانلود برنامه"},{default:d(({field:i})=>[a(n,b({modelValue:e.value.link,"onUpdate:modelValue":t[1]||(t[1]=p=>e.value.link=p),label:"لینک دانلود برنامه","single-line":"",variant:"solo-filled",size:"large"},i,{"hide-details":"auto"}),null,16,["modelValue"])]),_:1}),l("div",W,[a(s(_),{name:"link"})])]),l("div",X,[a(g,{modelValue:e.value.status,"onUpdate:modelValue":t[2]||(t[2]=i=>e.value.status=i),label:"انتخاب  وضعیت",items:w.value,"item-title":"state","item-value":"value","single-line":"",variant:"solo-filled"},null,8,["modelValue","items"])]),l("div",Y,[a(s(m),{mode:"passive",name:"description",rules:"required",label:"توضیحات"},{default:d(({field:i})=>[a(q,b({modelValue:e.value.description,"onUpdate:modelValue":t[3]||(t[3]=p=>e.value.description=p),label:"توضیحات","single-line":"",variant:"solo-filled",size:"large"},i,{"hide-details":"auto"}),null,16,["modelValue"])]),_:1}),l("div",Z,[a(s(_),{name:"description"})])]),l("div",ee,[a(s(m),{mode:"passive",name:"video",label:"ویدیو آموزشی"},{default:d(({field:i})=>[a(z,{accept:"video/*",label:"ویدیو آموزشی",size:"large","hide-details":"auto",onChange:y})]),_:1}),l("div",ae,[a(s(_),{name:"video"})])])]),a(E,{loading:h.value,color:"light-blue-accent-4",type:"submit",block:"",class:"mt-2"},{default:d(()=>[x("ویرایش")]),_:1},8,["loading"])]),_:1},512)]),_:1})]),_:1},8,["loading"]),a(R,{absolute:"",modelValue:f.value,"onUpdate:modelValue":t[4]||(t[4]=i=>f.value=i),timeout:2e4},{default:d(()=>[x(" برنامه با موفقیت ویرایش شد. ")]),_:1},8,["modelValue"])])}}});export{oe as default};
